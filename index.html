<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rock, Paper & Scissors</title>
  </head>

  <body>
    <script>
      // This function gets the computer's choice and returns a string
      function getComputerChoice() {
        const randomNum = Math.floor(Math.random() * 10);

        let firstChoice = "rock";
        let secondChoice = "paper";
        let thirdChoice = "scissors";

        if (randomNum < 3) {
          console.log(firstChoice);
          return firstChoice;
        }
        else if (randomNum < 7) {
          console.log(secondChoice);
          return secondChoice;
        }
        else {
          console.log(thirdChoice);
          return thirdChoice;
        }
      }

      // This function gets the human choice and turns a string.
      function getHumanChoice() {
        const humanChoice = prompt("Rock, Paper or Scissors?");
        const choice = humanChoice.toLowerCase();

        console.log(choice)
        return choice;
      }

      // These variables are for keeping scores on both sides.
      let humanScore = 0;
      let computerScore = 0;

      // This function stores the single round
      function playGame() {
        // These variables contain the callback functions to get the choices
        let humanSelection = getHumanChoice();
        let computerSelection = getComputerChoice();


        // This function compares the human and computer choices and plays one round of the game.
        function playRound(humanChoice, computerChoice) {

          if (humanChoice === computerChoice) {
            console.log("It's a tie.");
          } 
          else if ((humanChoice === "rock" && computerChoice === "scissors") 
            ||(humanChoice === "scissors" && computerChoice === "paper")
            ||(humanChoice === "paper" && computerChoice === "rock")) {
            console.log("You win this one.");
            return humanScore++;
          } 
          else {
            console.log("You lose this one.");
            return computerScore++;
          }
        }
        playRound(humanSelection, computerSelection);
        console.log(`You: ${humanScore} vs. Computer: ${computerScore}`);
      }

      // this 'for' loops for five rounds
      for (let i = 0; i < 5; i++) {
        playGame();

        if (i == 4) {
          if (humanScore == computerScore) {
            console.log(`The game is over. It's a tie (${humanScore} vs. ${computerScore}).`);
          }
          else if (humanScore > computerScore) {
            console.log(`You win the whole game (${humanScore} vs. ${computerScore})!`);
          }
          else {
            console.log(`Sorry... you have lost (${humanScore} vs. ${computerScore}).`)
          }
        }
      }

    </script>
  </body>
</html>
